/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package com.smartgov.osmparser.examples.roads;

import java.io.File;
import java.io.IOException;

import javax.xml.bind.JAXBException;

import com.smartgov.osmparser.Osm;
import com.smartgov.osmparser.OsmParser;
import com.smartgov.osmparser.elements.Node;
import com.smartgov.osmparser.elements.Relation;
import com.smartgov.osmparser.filters.tags.IncludeTagMatcher;

public class Main {

    public static void main(String[] args) throws JAXBException, IOException {
        OsmParser parser = new OsmParser();
        OsmStreet osm = (OsmStreet) parser.parse(new File(Main.class.getResource("../test.osm").getFile()), OsmStreet.class);
        

        parser.addWayFilter(new RoadWaysFilter());
        parser.addWayTagMatcher(new IncludeTagMatcher("highway", ".*"));
        parser.filterWays();
        
        // osm.addNodeFilter((new RoadNodesFilter(osm.getWays())).or(new ShopFilter()));
        parser.addNodeFilter(new RoadNodesFilter(osm.getWays()));
        parser.filterNodes();
        
        
//        System.out.println(osm.getNodes().size());
//        System.out.println(osm.getNodes());
        
        parser.writeNodes(new File("src/main/resources/com/smartgov/osmparser/examples/roads/nodes.json"));
        parser.writeWays(new File("src/main/resources/com/smartgov/osmparser/examples/roads/ways.json"));

    }
}
